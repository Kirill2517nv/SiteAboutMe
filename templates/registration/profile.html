{% extends 'base.html' %}

{% block title %}Мой профиль{% endblock title %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-12">
    <!-- Заголовок страницы -->
    <div class="text-center mb-10" data-aos="fade-up">
        <h1 class="text-3xl font-bold text-gray-900">Мой профиль</h1>
        <p class="text-gray-500 mt-2">Ваши персональные данные и статистика</p>
    </div>
    
    <div class="grid md:grid-cols-2 gap-6">
        <!-- Карточка с персональными данными -->
        <div class="bg-white rounded-2xl shadow-lg p-6" data-aos="fade-up" data-aos-delay="100">
            <div class="flex items-center mb-6">
                <div class="w-12 h-12 bg-brand-100 rounded-full flex items-center justify-center mr-4">
                    <svg class="w-6 h-6 text-brand-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                    </svg>
                </div>
                <h2 class="text-xl font-bold text-gray-900">Персональные данные</h2>
            </div>
            
            <div class="space-y-4">
                <div class="flex justify-between items-center py-3 border-b border-gray-100">
                    <span class="text-gray-500">Логин</span>
                    <span class="font-medium text-gray-900">{{ profile_user.username }}</span>
                </div>
                <div class="flex justify-between items-center py-3 border-b border-gray-100">
                    <span class="text-gray-500">Фамилия</span>
                    <span class="font-medium text-gray-900">{{ profile_user.last_name|default:"—" }}</span>
                </div>
                <div class="flex justify-between items-center py-3 border-b border-gray-100">
                    <span class="text-gray-500">Имя</span>
                    <span class="font-medium text-gray-900">{{ profile_user.first_name|default:"—" }}</span>
                </div>
                <div class="flex justify-between items-center py-3">
                    <span class="text-gray-500">Группа</span>
                    <span class="font-medium text-gray-900">{{ group.name|default:"Не указана" }}</span>
                </div>
            </div>
        </div>
        
        <!-- Карточка со статистикой -->
        <div class="bg-white rounded-2xl shadow-lg p-6" data-aos="fade-up" data-aos-delay="200">
            <div class="flex items-center mb-6">
                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4">
                    <svg class="w-6 h-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                </div>
                <h2 class="text-xl font-bold text-gray-900">Статистика</h2>
            </div>
            
            <div class="space-y-4">
                <div class="flex justify-between items-center py-3 border-b border-gray-100">
                    <span class="text-gray-500">Пройдено тестов</span>
                    <span class="font-medium text-gray-900">{{ unique_quizzes }}</span>
                </div>
                <div class="flex justify-between items-center py-3 border-b border-gray-100">
                    <span class="text-gray-500">Всего попыток</span>
                    <span class="font-medium text-gray-900">{{ total_attempts }}</span>
                </div>
                <div class="flex justify-between items-center py-3 border-b border-gray-100">
                    <span class="text-gray-500">Правильных ответов</span>
                    <span class="font-medium text-gray-900">{{ correct_answers }} из {{ total_answers }}</span>
                </div>
                <div class="flex justify-between items-center py-3">
                    <span class="text-gray-500">Процент успешности</span>
                    <span class="font-semibold {% if success_rate >= 70 %}text-green-600{% elif success_rate >= 50 %}text-yellow-600{% else %}text-red-600{% endif %}">
                        {{ success_rate }}%
                    </span>
                </div>
            </div>
            
            <!-- Прогресс-бар -->
            <div class="mt-6">
                <div class="w-full bg-gray-200 rounded-full h-3">
                    <div class="h-3 rounded-full transition-all duration-500 {% if success_rate >= 70 %}bg-green-500{% elif success_rate >= 50 %}bg-yellow-500{% else %}bg-red-500{% endif %}" 
                         style="width: {{ success_rate }}%"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ссылка на задачи -->
    <div class="text-center mt-8" data-aos="fade-up" data-aos-delay="300">
        <a href="{% url 'quizzes:quiz_list' %}" 
           class="inline-flex items-center px-6 py-3 bg-brand-600 text-white font-medium rounded-lg hover:bg-brand-700 transition-colors">
            <svg class="w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
            </svg>
            Перейти к задачам
        </a>
    </div>
</div>
{% endblock content %}
